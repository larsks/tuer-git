<?xml version="1.0"?>

<!-- ===================================================================== -->
<!-- TUER                                                                  -->
<!-- Ant 1.5 build file                                                    -->
<!-- ===================================================================== -->

<project name="TUER" default="build" basedir=".">
	<property name="destdir" value="."/>
	<property name="srcdir" value="."/>
	<!-- ================================================================= -->
	<!-- Compile                                                           -->
	<!-- ================================================================= -->
	<target name="compile" description="Compiles the source code">
	    <javac srcdir="${srcdir}"       	   
	           destdir="${destdir}"
	           debug="on" >
	        <include name="**/*.java"/>
	    </javac>
	</target>
	<!-- =================================================================== -->
	<!-- Build                                                               -->
	<!-- =================================================================== -->
	<target name="build" depends="clean,compile,dist" description="Performs a clean build of the source code and create the JAR"/>
	<!-- ================================================================= -->
	<!-- Dist                                                              -->
	<!-- ================================================================= -->
	<target name="dist" depends="compile" description="Creates the java archive">
		<!-- TODO: include only the jfpsm package -->
		<jar destfile="jfpsm.jar" basedir="${destdir}" 
			includes="**/*.class" 
			compress="false">
			<exclude name="**/gpl.txt" />
			<!-- ANT file -->
			<exclude name="**/build.xml" />
			<manifest>
				<attribute name="Main-Class" value="jfpsm.MainWindow"/>
			</manifest>
		</jar>
	</target>
	<!-- ================================================================= -->
	<!-- Clean                                                             -->
	<!-- ================================================================= -->
	<target name="clean" description="Deletes the java archive and the .class files">
	  	<delete>
	   	    <fileset dir="${destdir}" includes="**/*.class" />
	   	</delete>
		<delete file="${destdir}/jfpsm.jar" failonerror="false" />
	</target>
	<!-- =================================================================== -->
	<!-- Run Targets                                                         -->
	<!-- =================================================================== -->  
	<target name="run-jfpsm" description="Runs JFPSM">
		<java classname="connection.JFPSMServiceProvider"
			  fork="true"
			  dir="${destdir}"
			  failonerror="true">
		</java>
	</target>
</project>